<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Certificate Generator - Admin</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h2><i class="fas fa-certificate"></i> Certify Admin</h2>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#generator">Generator</a></li>
                <li><a href="#share">Share</a></li>
            </ul>
            <div class="theme-toggle">
                <button id="themeButton" class="theme-btn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>E-Certificate Generator â€” Admin Panel</h1>
            <p>Upload your certificate template and generate shareable links for your users</p>
            <a href="#generator" class="cta-button">Upload Template</a>
        </div>
    </section>

    <!-- Certificate Generator Section -->
    <section class="generator-section" id="generator">
        <div class="container">
            <h2>Admin Control Panel</h2>
            <div class="generator-card glass-effect">
                <div class="upload-section">
                    <label for="templateUpload" class="upload-label">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <span>Upload Certificate Template (PNG/JPG/SVG)</span>
                    </label>
                    <input type="file" id="templateUpload" accept=".png,.jpg,.jpeg,.svg" hidden>
                </div>
                
                <div class="preview-container">
                    <canvas id="certificateCanvas"></canvas>
                    <div id="previewPlaceholder">
                        <i class="fas fa-image preview-icon"></i>
                        <p>Your certificate template preview will appear here</p>
                        <p class="small-text">For best quality, use SVG templates</p>
                    </div>
                </div>
                
                <div class="position-controls" id="positionControls" style="display: none;">
                    <h3>Customize Certificate</h3>
                    <p>Click on the certificate to set where the recipient's name should appear:</p>
                    <div class="control-group">
                        <button id="setPositionBtn" class="btn-primary">
                            <i class="fas fa-crosshairs"></i> Set Name Position
                        </button>
                        <button id="resetPositionBtn" class="btn-secondary">
                            <i class="fas fa-undo"></i> Reset Position
                        </button>
                    </div>
                    <div class="position-info">
                        <p>Current Position: <span id="positionCoords">Not set</span></p>
                    </div>
                    <div class="font-controls">
                        <h4>Font Settings</h4>
                        <div class="control-group">
                            <select id="fontSizeSelect" class="font-select">
                                <option value="20">Small (20px)</option>
                                <option value="24">Medium Small (24px)</option>
                                <option value="30" selected>Medium (30px)</option>
                                <option value="36">Large (36px)</option>
                                <option value="42">Extra Large (42px)</option>
                            </select>
                            <button id="saveFontBtn" class="btn-primary">
                                <i class="fas fa-save"></i> Save Font Size
                            </button>
                        </div>
                        <div class="font-info">
                            <p>Current Font Size: <span id="fontSizeInfo">30px (Default)</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="admin-info">
                    <h3>Share with Users</h3>
                    <p>After uploading your template, share this link with your users:</p>
                    <div class="share-link">
                        <code id="shareLink">https://693adda585c3ee3bf68907e4--hilarious-quokka-8ade10.netlify.app/user.html</code>
                        <button id="copyLinkBtn" class="btn-secondary">Copy Link</button>
                    </div>
                    <div class="quality-tip">
                        <p><i class="fas fa-lightbulb"></i> Tip: SVG templates provide the best quality for certificates</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3><i class="fas fa-certificate"></i> Certify Admin</h3>
                    <p>Certificate Generation System</p>
                </div>
                <div class="social-icons">
                    <a href="https://github.com/Adithyakp86" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="https://www.linkedin.com/in/adithyakp86/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                    <a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook-f"></i></a>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 E-Certificate Generator. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Admin-specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            const copyLinkBtn = document.getElementById('copyLinkBtn');
            const setPositionBtn = document.getElementById('setPositionBtn');
            const resetPositionBtn = document.getElementById('resetPositionBtn');
            const saveFontBtn = document.getElementById('saveFontBtn');
            const fontSizeSelect = document.getElementById('fontSizeSelect');
            const positionControls = document.getElementById('positionControls');
            const positionCoords = document.getElementById('positionCoords');
            const fontSizeInfo = document.getElementById('fontSizeInfo');
            const certificateCanvas = document.getElementById('certificateCanvas');
            
            copyLinkBtn.addEventListener('click', function() {
                const shareLink = document.getElementById('shareLink');
                navigator.clipboard.writeText(shareLink.textContent)
                    .then(() => {
                        const originalText = copyLinkBtn.textContent;
                        copyLinkBtn.textContent = 'Copied!';
                        setTimeout(() => {
                            copyLinkBtn.textContent = originalText;
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                    });
            });
            
            // Show position controls when template is uploaded
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                        if (certificateCanvas.style.display !== 'none' && certificateCanvas.style.display !== '') {
                            positionControls.style.display = 'block';
                            
                            // Load saved font size if exists
                            const savedFontSize = localStorage.getItem('certificateFontSize');
                            if (savedFontSize) {
                                fontSizeSelect.value = savedFontSize;
                                fontSizeInfo.textContent = `${savedFontSize}px (Saved)`;
                            }
                        }
                    }
                });
            });
            
            observer.observe(certificateCanvas, {
                attributes: true,
                attributeFilter: ['style']
            });
            
            // Set position button handler
            setPositionBtn.addEventListener('click', function() {
                alert('Click on the certificate preview to set where the recipient name should appear.');
                certificateCanvas.addEventListener('click', setCertificatePosition, {once: true});
            });
            
            // Reset position button handler
            resetPositionBtn.addEventListener('click', function() {
                localStorage.removeItem('certificateNamePosition');
                positionCoords.textContent = 'Not set (will use center position)';
            });
            
            // Save font size button handler
            saveFontBtn.addEventListener('click', function() {
                const fontSize = fontSizeSelect.value;
                localStorage.setItem('certificateFontSize', fontSize);
                fontSizeInfo.textContent = `${fontSize}px (Saved)`;
                alert(`Font size ${fontSize}px saved successfully!`);
            });
            
            // Function to set certificate position
            function setCertificatePosition(e) {
                const rect = certificateCanvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Save position to localStorage
                const position = {x, y};
                localStorage.setItem('certificateNamePosition', JSON.stringify(position));
                
                // Update UI
                positionCoords.textContent = `X: ${Math.round(x)}, Y: ${Math.round(y)}`;
                
                // Visual feedback
                const ctx = certificateCanvas.getContext('2d');
                ctx.beginPath();
                ctx.arc(x, y, 10, 0, 2 * Math.PI);
                ctx.fillStyle = 'red';
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        });
    </script>
</body>
</html>